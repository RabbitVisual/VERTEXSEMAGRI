// ==========================================================================
// MIXINS DO MÓDULO CHAT - VERTEX SEMAGRI
// ==========================================================================

@use 'sass:color';
@use 'variables' as *;

// --------------------------------------------------------------------------
// FLEXBOX
// --------------------------------------------------------------------------

@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

@mixin flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

@mixin flex-start {
    display: flex;
    align-items: center;
    justify-content: flex-start;
}

@mixin flex-column {
    display: flex;
    flex-direction: column;
}

// --------------------------------------------------------------------------
// RESPONSIVO
// --------------------------------------------------------------------------

@mixin mobile {
    @media (max-width: 640px) {
        @content;
    }
}

@mixin tablet {
    @media (max-width: 768px) {
        @content;
    }
}

@mixin desktop {
    @media (min-width: 1024px) {
        @content;
    }
}

@mixin large-desktop {
    @media (min-width: 1280px) {
        @content;
    }
}

// --------------------------------------------------------------------------
// TEMA ESCURO
// --------------------------------------------------------------------------

@mixin dark-mode {
    .dark & {
        @content;
    }
}

// --------------------------------------------------------------------------
// SCROLLBAR PERSONALIZADO
// --------------------------------------------------------------------------

@mixin custom-scrollbar($width: 6px, $thumb-color: #cbd5e1, $track-color: transparent) {
    &::-webkit-scrollbar {
        width: $width;
        height: $width;
    }

    &::-webkit-scrollbar-track {
        background: $track-color;
    }

    &::-webkit-scrollbar-thumb {
        background: $thumb-color;
        border-radius: calc($width / 2);

        &:hover {
            background: color.adjust($thumb-color, $lightness: -10%);
        }
    }

    // Firefox
    scrollbar-width: thin;
    scrollbar-color: $thumb-color $track-color;

    @include dark-mode {
        &::-webkit-scrollbar-thumb {
            background: #475569;

            &:hover {
                background: #64748b;
            }
        }

        scrollbar-color: #475569 $track-color;
    }
}

// --------------------------------------------------------------------------
// TRANSIÇÕES
// --------------------------------------------------------------------------

@mixin transition($properties: all, $duration: $chat-transition-base) {
    transition: $properties $duration;
}

@mixin smooth-transition {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

// --------------------------------------------------------------------------
// SOMBRAS
// --------------------------------------------------------------------------

@mixin shadow($level: 'md') {
    @if $level =='sm' {
        box-shadow: $chat-shadow-sm;
    }

    @else if $level =='md' {
        box-shadow: $chat-shadow-md;
    }

    @else if $level =='lg' {
        box-shadow: $chat-shadow-lg;
    }

    @else if $level =='xl' {
        box-shadow: $chat-shadow-xl;
    }
}

// --------------------------------------------------------------------------
// BOTÕES
// --------------------------------------------------------------------------

@mixin button-base {
    @include flex-center;
    cursor: pointer;
    font-weight: 500;
    border: none;
    outline: none;
    @include transition;

    &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
}

@mixin button-primary {
    @include button-base;
    background: $gradient-green;
    color: white;
    @include shadow('md');

    &:hover:not(:disabled) {
        @include shadow('lg');
        transform: translateY(-1px);
    }

    &:active:not(:disabled) {
        transform: translateY(0);
    }
}

@mixin button-secondary {
    @include button-base;
    background: white;
    color: $chat-text-primary-light;
    border: 1px solid $chat-border-light;

    &:hover:not(:disabled) {
        background: $chat-bg-light;
    }

    @include dark-mode {
        background: $chat-sidebar-bg-dark;
        color: $chat-text-primary-dark;
        border-color: $chat-border-dark;

        &:hover:not(:disabled) {
            background: $chat-bg-dark;
        }
    }
}

@mixin button-icon($size: 40px) {
    @include button-base;
    width: $size;
    height: $size;
    border-radius: $chat-border-radius-full;
    padding: 0;
}

// --------------------------------------------------------------------------
// INPUTS
// --------------------------------------------------------------------------

@mixin input-base {
    width: 100%;
    padding: $chat-spacing-sm $chat-spacing-md;
    font-size: $chat-font-size-sm;
    border-radius: $chat-border-radius-lg;
    border: 1px solid $chat-border-light;
    background: white;
    color: $chat-text-primary-light;
    outline: none;
    @include transition;

    &::placeholder {
        color: $chat-text-muted-light;
    }

    &:focus {
        border-color: $primary-color;
        box-shadow: 0 0 0 3px rgba($primary-color, 0.1);
    }

    @include dark-mode {
        background: $chat-input-bg-dark;
        border-color: $chat-border-dark;
        color: $chat-text-primary-dark;

        &::placeholder {
            color: $chat-text-muted-dark;
        }

        &:focus {
            border-color: $primary-color;
            box-shadow: 0 0 0 3px rgba($primary-color, 0.2);
        }
    }
}

// --------------------------------------------------------------------------
// AVATAR
// --------------------------------------------------------------------------

@mixin avatar($size: $chat-avatar-md) {
    @include flex-center;
    width: $size;
    height: $size;
    border-radius: $chat-border-radius-full;
    font-weight: 600;
    font-size: calc($size / 2.5);
    flex-shrink: 0;
    background: $gradient-blue;
    color: white;
}

// --------------------------------------------------------------------------
// BADGES
// --------------------------------------------------------------------------

@mixin badge($bg-color: $primary-color, $text-color: white) {
    @include flex-center;
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    font-size: 11px;
    font-weight: 600;
    border-radius: $chat-border-radius-full;
    background: $bg-color;
    color: $text-color;
}

// --------------------------------------------------------------------------
// TRUNCATE
// --------------------------------------------------------------------------

@mixin truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

@mixin line-clamp($lines: 2) {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

// --------------------------------------------------------------------------
// STATUS DOT
// --------------------------------------------------------------------------

@mixin status-dot($size: 10px) {
    width: $size;
    height: $size;
    border-radius: $chat-border-radius-full;
    flex-shrink: 0;

    &.waiting {
        background: $status-waiting;
        animation: blink 1s infinite;
    }

    &.active {
        background: $status-active;
    }

    &.closed {
        background: $status-closed;
    }

    &.online {
        background: $status-online;
    }

    &.offline {
        background: $status-offline;
    }
}

// --------------------------------------------------------------------------
// CARD
// --------------------------------------------------------------------------

@mixin card {
    background: white;
    border-radius: $chat-border-radius-lg;
    border: 1px solid $chat-border-light;
    @include shadow('md');

    @include dark-mode {
        background: $chat-sidebar-bg-dark;
        border-color: $chat-border-dark;
    }
}

// --------------------------------------------------------------------------
// GLASS EFFECT
// --------------------------------------------------------------------------

@mixin glass-effect {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);

    @include dark-mode {
        background: rgba(30, 41, 59, 0.8);
    }
}